const _0x1db591=(function(){let _0x3cf429=!![];return function(_0x348e49,_0x364be0){const _0x41982c=_0x3cf429?function(){if(_0x364be0){const _0x389ca5=_0x364be0['apply'](_0x348e49,arguments);return _0x364be0=null,_0x389ca5;}}:function(){};return _0x3cf429=![],_0x41982c;};}()),_0x5f1206=_0x1db591(this,function(){return _0x5f1206['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x5f1206)['search']('(((.+)+)+)+$');});_0x5f1206();const {SlashCommandBuilder}=require('@discordjs/builders'),Discord=require('discord.js'),fs=require('fs'),yaml=require('js-yaml'),config=yaml['load'](fs['readFileSync']('./config.yml','utf8')),productModel=require('../models/productModel'),licenseModel=require('../models/licenseModel'),statisticsModel=require('../models/statisticsModel'),utils=require('../utils.js');module['exports']={'data':new SlashCommandBuilder()['setName']('product')['setDescription']('Manage\x20products')['addSubcommand'](_0x59a235=>_0x59a235['setName']('create')['setDescription']('Create\x20a\x20new\x20product')['addStringOption'](_0x111e6a=>_0x111e6a['setName']('name')['setDescription']('The\x20name\x20of\x20the\x20product\x20(No\x20spaces)')['setRequired'](!![]))['addRoleOption'](_0x5ac12c=>_0x5ac12c['setName']('role')['setDescription']('The\x20customer\x20role\x20for\x20this\x20product')['setRequired'](config['LicenseSettings']['GiveCustomerRole'])))['addSubcommand'](_0x265ef3=>_0x265ef3['setName']('delete')['setDescription']('Delete\x20a\x20specific\x20product')['addStringOption'](_0x1474eb=>_0x1474eb['setName']('name')['setDescription']('The\x20name\x20of\x20the\x20product\x20(No\x20spaces)')['setRequired'](!![])))['addSubcommand'](_0x5bf526=>_0x5bf526['setName']('list')['setDescription']('Get\x20a\x20list\x20of\x20all\x20products-')),async 'execute'(_0x2e65d9,_0x37b6e3){await _0x2e65d9['deferReply']({'ephemeral':!![]});let _0x37bb22;if(config['WebhookLogsSettings']['Enabled']&&config['WebhookLogsSettings']['CommandsWebhookURL'])_0x37bb22=new Discord['WebhookClient']({'url':config['WebhookLogsSettings']['CommandsWebhookURL']});let _0x4a6c5c=_0x2e65d9['options']['getSubcommand']();if(_0x4a6c5c==='create'){if(config['product_create']['Enabled']===![])return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20This\x20command\x20has\x20been\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});const _0x2d3f68=config['product_create']['AllowedRoles']['some'](_0x18d68b=>{const _0x1ef7d4=_0x2e65d9['guild']['roles']['cache']['get'](_0x18d68b);return _0x1ef7d4&&_0x2e65d9['member']['roles']['cache']['has'](_0x18d68b);});if(!config['DevMode']&&!_0x2d3f68)return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20'+config['Locale']['NoPermsMessage'],'ephemeral':!![]});const _0x3d4677=_0x2e65d9['options']['getString']('name'),_0x19e8f2=_0x2e65d9['options']['getRole']('role');let _0x7d590;if(!_0x19e8f2)_0x7d590='';if(_0x19e8f2)_0x7d590=_0x19e8f2['id'];if(_0x3d4677['match'](/\s/g))return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20A\x20product\x20name\x20can\x27t\x20contain\x20spaces!','ephemeral':!![]});const _0x1a9bb1=await productModel['findOne']({'name':_0x3d4677});if(_0x1a9bb1)return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20A\x20product\x20with\x20that\x20name\x20already\x20exists!','ephemeral':!![]});const _0x41533a=new productModel({'name':_0x3d4677,'customerRoleID':_0x7d590,'createdBy':_0x2e65d9['user']['id'],'createdAt':Date['now'](),'updatedAt':Date['now']()});await _0x41533a['save']();try{if(_0x37bb22){let _0x2fa27d=new Discord['EmbedBuilder']();_0x2fa27d['setAuthor']({'name':'ğŸŸ¢\x20Product\x20Created'}),_0x2fa27d['setColor']('Green'),_0x2fa27d['addFields']({'name':'â€¢\x20Product\x20Information:','value':'>\x20Product\x20Name:\x20``'+_0x3d4677+'``\x0a>\x20Created\x20at:\x20<t:'+(Date['now']()/(-0xd*0x48+-0x2*0x9e1+0x1b52)|0x1764+-0xe58+-0x90c)+':R>'}),_0x2fa27d['addFields']({'name':'â€¢\x20Created\x20by:','value':'>\x20User:\x20<@!'+_0x2e65d9['user']['id']+'>\x20('+_0x2e65d9['user']['username']+')\x0a>\x20User\x20ID:\x20``'+_0x2e65d9['user']['id']+'``'}),_0x2fa27d['setTimestamp'](),_0x37bb22['send']({'embeds':[_0x2fa27d]});}}catch(_0x48d789){console['error'](_0x48d789);}return _0x2e65d9['editReply']({'content':'ğŸŸ¢\x20|\x20You\x20successfully\x20created\x20a\x20new\x20product!\x20``('+_0x3d4677+')``\x0a\x0aâš ï¸\x20|\x20Make\x20sure\x20to\x20always\x20use\x20the\x20exact\x20same\x20product\x20name\x20when\x20setting\x20up\x20the\x20authentication\x20for\x20your\x20product.\x0aAnd\x20if\x20you\x20set\x20a\x20customer\x20role,\x20make\x20sure\x20the\x20bot\x20has\x20a\x20higher\x20role\x20than\x20that\x20role\x0aRestart\x20the\x20bot\x20to\x20display\x20the\x20product\x20in\x20license\x20create\x20command.'});}if(_0x4a6c5c==='delete'){if(config['product_delete']['Enabled']===![])return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20This\x20command\x20has\x20been\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});const _0x3988eb=config['product_delete']['AllowedRoles']['some'](_0x40815a=>{const _0x4ea03a=_0x2e65d9['guild']['roles']['cache']['get'](_0x40815a);return _0x4ea03a&&_0x2e65d9['member']['roles']['cache']['has'](_0x40815a);});if(!config['DevMode']&&!_0x3988eb)return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20'+config['Locale']['NoPermsMessage'],'ephemeral':!![]});const _0x150114=_0x2e65d9['options']['getString']('name');if(_0x150114['match'](/\s/g))return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20A\x20product\x20name\x20can\x27t\x20contain\x20spaces!','ephemeral':!![]});const _0x58bb46=await productModel['findOne']({'name':_0x150114});if(!_0x58bb46)return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20A\x20product\x20with\x20that\x20name\x20doesn\x27t\x20exist!','ephemeral':!![]});try{if(_0x37bb22){let _0x4f01fc=new Discord['EmbedBuilder']();_0x4f01fc['setAuthor']({'name':'ğŸ”´\x20Product\x20Deleted'}),_0x4f01fc['setColor']('Red'),_0x4f01fc['addFields']({'name':'â€¢\x20Product\x20Information:','value':'>\x20Product\x20Name:\x20``'+_0x150114+'``'}),_0x4f01fc['addFields']({'name':'â€¢\x20Deleted\x20by:','value':'>\x20User:\x20<@!'+_0x2e65d9['user']['id']+'>\x20('+_0x2e65d9['user']['username']+')\x0a>\x20User\x20ID:\x20``'+_0x2e65d9['user']['id']+'``'}),_0x4f01fc['setTimestamp'](),_0x37bb22['send']({'embeds':[_0x4f01fc]});}}catch(_0x3f01a6){console['error'](_0x3f01a6);}return await productModel['findOneAndDelete']({'name':_0x150114}),_0x2e65d9['editReply']({'content':'ğŸŸ¢\x20|\x20You\x20successfully\x20deleted\x20a\x20product!\x20``('+_0x150114+')``'});}if(_0x4a6c5c==='list'){if(config['product_list']['Enabled']===![])return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20This\x20command\x20has\x20been\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});const _0x4be94e=config['product_list']['AllowedRoles']['some'](_0x389f0b=>{const _0x58acf2=_0x2e65d9['guild']['roles']['cache']['get'](_0x389f0b);return _0x58acf2&&_0x2e65d9['member']['roles']['cache']['has'](_0x389f0b);});if(!config['DevMode']&&!_0x4be94e)return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20'+config['Locale']['NoPermsMessage'],'ephemeral':!![]});const _0x32c776=await productModel['find']();if(!_0x32c776||_0x32c776?.['length']==0x2157+0x10b7+-0x56*0x95)return _0x2e65d9['editReply']({'content':'ğŸ”´\x20|\x20There\x27s\x20no\x20products\x20yet!','ephemeral':!![]});let _0x3aff2c=[];for(let _0x1b8fa6=-0x2614+-0xc1f+0x3233;_0x1b8fa6<_0x32c776['length'];_0x1b8fa6++){const _0x20f49d=_0x32c776[_0x1b8fa6];let _0x34559d;if(_0x20f49d['customerRoleID'])_0x34559d=_0x20f49d['customerRoleID'];if(!_0x20f49d['customerRoleID'])_0x34559d='None';let _0x45e5f3=new Discord['EmbedBuilder']();_0x45e5f3['setAuthor']({'name':'ğŸ“¦\x20Total\x20Products:\x20'+_0x32c776['length']}),_0x45e5f3['setColor'](config['EmbedColors']),_0x45e5f3['addFields']({'name':'â€¢\x20Product\x20Information:','value':'>\x20Product\x20Name:\x20``'+_0x20f49d['name']+'``\x0a>\x20Customer\x20Role:\x20``'+_0x34559d+'``\x0a>\x20Created\x20at:\x20<t:'+(_0x20f49d['createdAt']/(0x1*0x112d+0xbd+-0xe02)|0x11*-0x166+0xa56+0xd70)+':R>'}),_0x45e5f3['setTimestamp'](),_0x3aff2c['push'](_0x45e5f3);}utils['paginateEmbed'](_0x2e65d9,['âª','Previous','Next','â©'],_0x3aff2c,'3m');}}};